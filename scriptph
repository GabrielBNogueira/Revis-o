const botao = document.getElementById('btnConfirmar');
const PHdata = document.getElementById('data').value;
// cadastrar
    botao.addEventListener('click',
        function () {
            let usuarios = JSON.parse(localStorage.getItem("usuarios")) || []; //localStorage é uma memória do computador
            const usuario = {
                PH : document.getElementById("PH").value.trim(),
                PH : document.getElementById("PH").value.trim()
            }

            const indexEditando = document.getElementById('indexEditar').value;
            if(indexEditando !== ""){
                usuarios[indexEditando] = usuario;
                document.getElementById('indexEditar').value = "";
            }else{
                usuarios.push(usuario);
            }
            
           // const PHdata = document.getElementById("data").value;
            if (tipo === "PH1") {
                PHdata = PHdata + 1;
              } else if (tipo === "PH2") {
                PHdata = PHdata + 2;
              } else if (tipo === "PH3") {
                PHdata = PHdata + 3;
              }
            

            let listaUsuarios = JSON.stringify(usuarios);
            localStorage.setItem("usuarios", listaUsuarios);
            document.getElementById('nome').value = '';
            document.getElementById('PH').value = '';
            document.getElementById('data').value = '';
            //PHdata = '';
            listar();
        }
    );

//listar
    function listar(){
        const listaUsuarioCad = JSON.parse(localStorage.getItem("usuarios")) || [];
        console.log(listaUsuarioCad);
        const tabelaListaUsuarios = document.getElementById('listaUsuarios');
        tabelaListaUsuarios.innerHTML = "";

    //forEach percorrendo o vetor e apresentando Login e Senha 
        listaUsuarioCad.forEach((usuario, index) => { //função for que percorre o vetor (para cada)
            const linha = document.createElement('tr');
            linha.innerHTML = `
                <td>${usuario.nome}</td>
                <td>${usuario.PH}</td>
                <td>${usuario.data}</td>
                <td>${usuario.PHdata}</td>
                <td>
                    <button onclick="editarUsuario(${index})">Editar</button>
                    <button onclick="excluirUsuario(${index})">Remover</button>
                </td>
            `;
            tabelaListaUsuarios.appendChild(linha);
        });
    }

//remover
    function excluirUsuario(index){
        const listaUsuariosCadastrados = JSON.parse(localStorage.getItem("usuarios"))||[];

        if (confirm("Tem certeza que deseja excluir?")){
            listaUsuariosCadastrados.splice(index, 1);
            listaJson = JSON.stringify(listaUsuariosCadastrados);
            localStorage.setItem("usuarios", listaJson);
            listar();
        }
    }

    function editarUsuario(index){
        const listaUsuariosCadastrados = JSON.parse(localStorage.getItem("usuarios"))||[];
        const usuario = listaUsuariosCadastrados[index];
        document.getElementById('nome').value = usuario.nome;
        document.getElementById('PH').value = usuario.PH;
        document.getElementById('data').value = usuario.data;
        //devPHdata = usuario.PHdata;
        document.getElementById('indexEditar').value = index;
    }

listar();
